//alert ('Done! in Ajax');
console.log('done.js.erb function'); 

<% if @lastcomment != nil %>

		// This is how we construct the specific div in the base-jq.js file for the new comment (see addNewComment function in that file).
		// They have to match, otherwise the new comment will not show up. the unique identifier is the activity ID 
		// which is basically the tivit ID.
		var newcommentId = "#newcomment" + "<%= @activity.id %>";
		
		console.log('[Yaniv] decline.js.erb:: newcommentId=', newcommentId);  
		
		jQuery(newcommentId).append("<%= escape_javascript(render(:partial => 'shared/tivit_adp_comment', :collection =>  [@lastcomment])) %>");		
		
		// Mark new added comment as new with yellow background
		var record = jQuery(newcommentId).find('.record');
		record.addClass('active');
					
		console.log('done.js.erb:: succeeded?'); 
		console.log('done.js.erb:: new comment should be rendered by now...'); 

<% else %>

	console.log('done.js.erb:: seems like the comment we need to render is nil.'); 

<% end %>
 
jQuery('#confirmDialog').remove();
jQuery('#activity-overlay').hide();
